{"version":3,"file":"index.modern.js","sources":["../src/AutoForm.js","../src/index.js"],"sourcesContent":["import React from 'react'\nimport getFormData from 'get-form-data'\n\nexport default class AutoForm extends React.Component {\n  static defaultProps = {\n    component: 'form',\n    trim: false,\n    trimOnSubmit: false,\n  }\n\n  _onChange = (e) => {\n    const { form, name } = e.target\n    const data = getFormData.getFieldData(form, name, { trim: this.props.trim })\n    const change = {}\n    change[name] = data\n    this.props.onChange(e, name, data, change)\n  }\n\n  _onSubmit = (e) => {\n    const data = getFormData(e.target, {\n      trim: this.props.trimOnSubmit || this.props.trim\n    })\n    this.props.onSubmit(e, data)\n  }\n\n  render() {\n    const {\n      children,\n      component: Component,\n      onChange,\n      onSubmit,\n      trim,\n      trimOnSubmit, // eslint-disable-line no-unused-vars\n      ...props\n    } = this.props\n    return (\n      <Component\n        {...props}\n        children={children}\n        onChange={onChange && this._onChange}\n        onSubmit={onSubmit && this._onSubmit}\n      />\n    )\n  }\n}\n\n/* For functional refactor\nexport default function AutoForm({\n  component = 'form',\n  trim = false,\n  trimOnSubmit = false,\n  ...props\n}) {\n  const {\n    children,\n    component: Component,\n    onChange,\n    onSubmit,\n  } = props\n\n  return (\n    <Component\n      {...props}\n      children={children}\n      onChange={onChange && this._onChange}\n      onSubmit={onSubmit && this._onSubmit}\n    />\n  )\n}\n*/\n","import React from 'react'\nimport AutoForm from './AutoForm'\n\nfunction fixScroll() {\n  // http://bit.ly/2gQ6jFJ\n  this.scrollIntoView(false)\n}\n\nfunction grabNodes(node) {\n  return node.querySelectorAll('input,select,textarea')\n}\n\nexport default class Form extends React.Component {\n  componentDidMount() {\n    const inputNodes = grabNodes(node)\n    for (var i = 0; i < inputNodes.length; i++) {\n      inputNodes[i].addEventListener('invalid', fixScroll)\n    }\n  }\n\n  componentWillUnmount() {\n    const inputNodes = grabNodes(node)\n    for (var i = 0; i < inputNodes.length; i++) {\n      inputNodes[i].removeEventListener('invalid', fixScroll)\n    }\n  }\n\n  handleSubmit = (event, data) => {\n    const { onSubmit } = this.props\n    event.preventDefault()\n    if (onSubmit) {\n      onSubmit(event, data)\n    }\n  }\n\n  render() {\n    const { id, onChange, trimOnSubmit, children, name, ...rest } = this.props\n    return (\n      <div ref={(node) => { this.node = node }}>\n        <AutoForm\n          name={name}\n          id={id}\n          trimOnSubmit={trimOnSubmit}\n          onChange={onChange}\n          onSubmit={this.handleSubmit}\n          {...rest}\n        >\n          {children}\n        </AutoForm>\n      </div>\n    )\n  }\n}\n"],"names":["AutoForm","_onChange","e","target","form","name","data","getFormData","getFieldData","trim","props","change","onChange","_onSubmit","trimOnSubmit","onSubmit","render","children","Component","component","React","defaultProps","fixScroll","scrollIntoView","grabNodes","node","querySelectorAll","Form","handleSubmit","event","preventDefault","componentDidMount","inputNodes","i","length","addEventListener","componentWillUnmount","removeEventListener","id","rest"],"mappings":"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"}